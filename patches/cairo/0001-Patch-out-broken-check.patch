From 22e56fd50891a92af54931137e3391dc30beacb7 Mon Sep 17 00:00:00 2001
From: Alexander <electrodeyt@gmail.com>
Date: Fri, 21 Jul 2023 14:50:54 +0200
Subject: [PATCH] Patch out broken check

---
 meson.build | 28 ++++++++++++++--------------
 1 file changed, 14 insertions(+), 14 deletions(-)

diff --git a/meson.build b/meson.build
index 12512d1..bb8cf17 100644
--- a/meson.build
+++ b/meson.build
@@ -372,23 +372,23 @@ if x11_dep.found() and xext_dep.found()
 
   # Can skip the run check by providing the result in a cross file or
   # native file as bool property value.
-  prop = meson.get_external_property('ipc_rmid_deferred_release', 'auto')
+#  prop = meson.get_external_property('ipc_rmid_deferred_release', 'auto')
   # We don't know the type of prop (bool, string) but need to differentiate
   # between a set value (bool) or the fallback value (string), so convert to
   # a string and check the string value.
-  prop_str = '@0@'.format(prop)
-  if prop_str in ['true', 'false']
-    ipc_rmid_deferred_release = (prop_str == 'true')
-    message('IPC_RMID_DEFERRED_RELEASE:', ipc_rmid_deferred_release)
-  elif prop_str == 'auto'
-    res = cc.run(files('meson-cc-tests/ipc_rmid_deferred_release.c'),
-      dependencies: [x11_dep, xext_dep],
-      name: 'shmctl IPC_RMID allowes subsequent attaches')
-
-    ipc_rmid_deferred_release = (res.returncode() == 0)
-  else
-    error('Unexpected value for external property ipc_rmid_deferred_release: @0@'.format(prop_str))
-  endif
+#  prop_str = '@0@'.format(prop)
+#  if prop_str in ['true', 'false']
+    ipc_rmid_deferred_release = false
+#    message('IPC_RMID_DEFERRED_RELEASE:', ipc_rmid_deferred_release)
+#  elif prop_str == 'auto'
+#    res = cc.run(files('meson-cc-tests/ipc_rmid_deferred_release.c'),
+#      dependencies: [x11_dep, xext_dep],
+#      name: 'shmctl IPC_RMID allowes subsequent attaches')
+
+#    ipc_rmid_deferred_release = (res.returncode() == 0)
+#  else
+#    error('Unexpected value for external property ipc_rmid_deferred_release: @0@'.format(prop_str))
+#  endif
 
   conf.set10('IPC_RMID_DEFERRED_RELEASE', ipc_rmid_deferred_release)
 endif
-- 
2.41.0

