From 32d7018a2c57dfd2932e9fe096ecd3546bc93dc1 Mon Sep 17 00:00:00 2001
From: no92 <no92.mail@gmail.com>
Date: Mon, 12 Feb 2024 00:32:53 +0100
Subject: [PATCH 1/2] Add managarm support

---
 src/unix/linux_like/mod.rs | 6 +++++-
 src/unix/mod.rs            | 3 ++-
 2 files changed, 7 insertions(+), 2 deletions(-)

diff --git a/src/unix/linux_like/mod.rs b/src/unix/linux_like/mod.rs
index 3117c18..f5297df 100644
--- a/src/unix/linux_like/mod.rs
+++ b/src/unix/linux_like/mod.rs
@@ -67,7 +67,8 @@ s! {
         pub ai_addrlen: socklen_t,
 
         #[cfg(any(target_os = "linux",
-                  target_os = "emscripten"))]
+                  target_os = "emscripten",
+                  target_os = "managarm"))]
         pub ai_addr: *mut ::sockaddr,
 
         pub ai_canonname: *mut c_char,
@@ -1897,6 +1898,9 @@ cfg_if! {
     } else if #[cfg(target_os = "android")] {
         mod android;
         pub use self::android::*;
+    } else if #[cfg(target_os = "managarm")] {
+        mod managarm;
+        pub use self::managarm::*;
     } else {
         // Unknown target_os
     }
diff --git a/src/unix/mod.rs b/src/unix/mod.rs
index 9b5ce0f..2f2da70 100644
--- a/src/unix/mod.rs
+++ b/src/unix/mod.rs
@@ -1562,7 +1562,8 @@ cfg_if! {
     } else if #[cfg(any(target_os = "linux",
                         target_os = "l4re",
                         target_os = "android",
-                        target_os = "emscripten"))] {
+                        target_os = "emscripten",
+                        target_os = "managarm"))] {
         mod linux_like;
         pub use self::linux_like::*;
     } else if #[cfg(any(target_os = "macos",
-- 
2.44.0

